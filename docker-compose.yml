version: "3.7"
services:
  react-app:
    environment:
      CHOKIDAR_USEPOLLING: "true"
    build:
      context: ./
      dockerfile: Dockerfile
    command: bash -c "npm install; npm start; npm run storybook"
    ports:
      - "3000:3000"
    volumes:
      - ./:/usr/src/app
    container_name: react-app
    networks:
      - reactapp
  react-app-doc:
    volumes:
      - ./:/usr/src/app
    container_name: react-app-doc
    ports:
      - "6006:6006"
    links:
      react-app
    command: bash -c "npm run storybook"
    networks:
      - reactapp
networks:
    reactapp:
        driver: bridge
